<!DOCTYPE HTML>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <title>Detial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="keywords" content="Photo-Hub Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
    <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
    <link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- Custom Theme files -->
    <link href="css/style.css" rel='stylesheet' type='text/css' />
    <!-- Custom Theme files -->
    <!--webfont-->
    <link href='http://fonts.useso.com/css?family=Quicksand:300,400,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.useso.com/css?family=Open+Sans:300,400,600,700,800' rel='stylesheet' type='text/css'>
    <script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
    <script src="js/menu_jquery.js"></script>
</head>
<body>
<style>
    input[type="file"] {
        color: transparent;
    }
</style>
<div class="header">
    <div class="container">
        <div class="logo">
            <h1><a href="index.html">Cake</a></h1>
        </div>
        <div class="top_right">
            <ul th:if="${session.username}!=null" th:text="${session.username}">

            </ul>
            <ul th:if="${session.username}==null">
                <li><a href="/register">Register</a></li>|
                <li class="login" >
                    <div id="loginContainer"><a href="#" id="loginButton"><span>Login</span></a>
                        <div id="loginBox">
                            <form id="loginForm" action="/userLogin">
                                <fieldset id="body">
                                    <fieldset>
                                        <label for="email">Email Address</label>
                                        <input type="text" name="email" id="email">
                                    </fieldset>
                                    <fieldset>
                                        <label for="password">Password</label>
                                        <input type="password" name="password" id="password">
                                    </fieldset>
                                    <input type="submit" id="login" value="Sign in">
                                    <label for="checkbox"><input type="checkbox" id="checkbox"> <i>Remember me</i></label>
                                </fieldset>
                                <span><a href="#">Forgot your password?</a></span>
                            </form>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="clearfix"></div>
    </div>
</div>
<div class="ba">
    <div class="grid_1_d" href="#" >
        <ul  >
<!--            <img src="@{/file/{fileName}(fileName=${session.fileName})}" width="100%" height="100%" />-->
<!--            <span th:text="${session.base64Path}"></span>-->
               <li th:if="${session.source}!=null">
                   <span th:text="${session.source}"></span>
                <img th:src="${session.source}"  alt="" width="100%" height="100%"/>
               </li>

            <li th:if="${session.source}==null">
                <img src="images/source.jpg"  class="img-responsive" alt="" width="100%" height="100%"/>
            </li>
        </ul>

    </div>

    <div class="container" >
        <div class="span_1_of_d" >
            <h2>Cake Search by Image</h2>
            <div class="search">
                <ul class="nav1">
                    <li id="search">

                        <form action=""   id ="fileUploadForm" enctype="multipart/form-data">
                            <input type="text" name="search_text" id="search_text" placeholder="Search"/>
                            <input type="button" name="search_button" id="search_button"  />
                            <input type="button" name="camera_button" id="camera_button" onclick="window.location.href='/camera'">
                            <br/>
                            <br/>
                            <br/>
                            <input type="file" name="file" id="file" display="none" onchange="inputImage()">
                        </form>

                    </li>
                </ul>
            </div>
        </div>
    </div>

    <br/>

    <div class="grid_2" th:each="arrayS:${session.ImagePath}">

        <div class="col-md-2 col_1">
            <img th:src="${arrayS}"class="img-responsive"/>
        </div>
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/g2.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/g3.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/g4.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/g5.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <h4>Food</h4>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/f1.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/pic9.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/f2.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/f3.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/f4.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <h4>Wedding</h4>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/w1.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/pic15.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/w2.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/w3.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/w4.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <h4>People</h4>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/pic20.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/pic21.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/pic22.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/pic23.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
<!--        <div class="col-md-2 col_1">-->
<!--            <img src="images/pic24.jpg" class="img-responsive" alt=""/>-->
<!--        </div>-->
        <div class="clearfix"> </div>
    </div>
</div>
<div class="grid_3">
    <div class="container">
        <ul id="footer-links">
            <li><a href="#">Terms of Use</a></li>
            <li><a href="#">Royalty Free License</a></li>
            <li><a href="#">Extended License</a></li>
            <li><a href="#">Privacy</a></li>
            <li><a href="support.html">Support</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li><a href="#">Categories</a></li>
        </ul>
        <p>Copyright &copy; 2015.Company name All rights reserved.<a target="_blank" href="http://sc.chinaz.com/moban/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a></p>
    </div>
</div>
</body>
<script>
    function inputImage(){
        var formData=new FormData($("#fileUploadForm")[0]);
        var filePath;
        filePath=document.getElementById("file").value;
        formData.append("filePath",filePath);
        $.ajax({
            //提交数据的类型 POST GET
            type:"POST",
            //提交的网址
            url:"/perception",
            //提交的数据
            data:formData,
            //返回数据的格式
            processData: false, // 告诉jQuery不要去处理发送的数据
            contentType: false, // 告诉jQuery不要去设置Content-Type请求头            //成功返回之后调用的函数
            success:function(data){
                alert("成功")
            }   ,
            //调用出错执行的函数
            error: function(){
                //请求出错处理
                alert("出错")
            }
        });
    }




</script>
</html>		